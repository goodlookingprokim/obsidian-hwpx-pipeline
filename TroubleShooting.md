# TroubleShooting.md

## 1. 문서 목적
이 문서는 설치, 사용, 개발, 배포 과정에서 자주 만나는 문제와 해결 절차를 정리합니다.

권장 사용 순서:
1. 증상 확인
2. 원인 후보 확인
3. 빠른 해결 절차 실행
4. 재발 방지 설정 적용

## 2. 빠른 인덱스
- 설치/활성화 문제: 3장
- 임포트/익스포트 문제: 4장
- AI 연동 문제: 5장
- 템플릿/경로 문제: 6장
- 개발/빌드 문제: 7장
- Git/GitHub 배포 문제: 8장

## 3. 설치/활성화 문제

### 3.1 플러그인이 목록에 안 보임
증상:
- Obsidian `Community plugins` 목록에서 `HWPX Pipeline`이 보이지 않음

원인:
- 플러그인 파일 경로 오류
- `manifest.json` 누락
- Obsidian 재시작 미실행

해결:
1. 경로 확인: `<VAULT>/.obsidian/plugins/hwpx-pipeline/`
2. 파일 확인: `main.js`, `manifest.json`
3. Obsidian 재시작

### 3.2 설치 후 커맨드가 없음
원인:
- 플러그인이 비활성화됨
- 빌드 실패한 `main.js` 사용

해결:
1. Community plugins에서 활성화 확인
2. 최신 릴리스 자산 재복사
3. `npm run build` 후 `main.js` 교체

## 4. 임포트/익스포트 문제

### 4.1 `임포트 실패`가 뜸
원인:
- HWPX 파일 손상
- 경로/파일명 정제 과정에서 충돌
- 출력 경로에 동일 이름 폴더 존재

해결:
1. 다른 HWPX 파일로 재현 확인
2. 출력 폴더를 빈 값(Vault 루트)으로 테스트
3. 동일 경로에 폴더가 있는지 확인 후 이름 변경

### 4.2 익스포트는 됐는데 다운로드가 안 됨
원인:
- 브라우저 다운로드 차단
- 전달 방식이 `Vault 저장만`

해결:
1. 설정의 `익스포트 결과 전달` 확인
2. 브라우저/OS 다운로드 권한 허용
3. Vault 내 `.hwpx` 파일 생성 여부 확인

### 4.3 표/서식 일부가 기대와 다름
원인:
- HWPX 원본 구조와 Markdown 표현 차이
- 인라인 서식 변환 한계

해결:
1. 템플릿 기반으로 재익스포트 시도
2. 핵심 표/제목은 수동 보정 후 저장
3. 필요한 패턴을 이슈로 수집해 변환 규칙 확장

## 5. AI 연동 문제

### 5.1 `API 키가 없습니다`
원인:
- `API 키 저장`이 OFF이고 세션이 종료됨

해결:
1. 설정에서 API 키 재입력
2. 필요 시 `API 키 저장` ON

### 5.2 AI 응답 오류(401/403/429)
원인:
- 키 오입력(401)
- 권한/요금제 제한(403)
- 요청량 초과(429)

해결:
1. API 키 재발급/재입력
2. 모델 접근 권한 확인
3. 요청 간격 조절 및 컨텍스트 길이 축소

### 5.3 응답이 느리거나 비어 있음
원인:
- 컨텍스트 과다 전송
- 네트워크 지연
- 모델 응답 포맷 불안정

해결:
1. 컨텍스트를 `선택 텍스트`로 변경
2. `최대 컨텍스트 길이`를 4000~8000으로 축소
3. 다시 시도

## 6. 템플릿/경로 문제

### 6.1 `허용되지 않는 폴더 경로` 오류
원인:
- 절대경로, `..`, 잘못된 경로 문자 사용

해결:
1. Vault 상대경로만 사용 (`_hwpx_templates`, `exports` 등)
2. `..`, `C:\`, `/` 시작 경로 제거

### 6.2 잘못된 템플릿으로 익스포트됨
원인:
- frontmatter `source_file`가 오래된 값

해결:
1. `HWPX 템플릿 관리` 실행
2. 해당 템플릿으로 `현재 노트 연결`
3. 다시 익스포트

### 6.3 템플릿 삭제가 안 됨
원인:
- 파일 잠금 또는 권한 문제

해결:
1. Obsidian에서 파일 열림 상태 해제
2. OS 파일 권한 확인
3. 재시도

## 7. 개발/빌드 문제

### 7.1 `npx tsc --noEmit` 타입 오류
해결 순서:
1. 최근 변경 파일 확인
2. 타입 선언(`interface`, `union`) 일치 여부 점검
3. `npm install` 재실행 후 재검증

### 7.2 `npm test` 실패
원인:
- 샘플 파일 누락
- 테스트 번들/환경 문제

해결:
1. `node create-sample-hwpx.mjs`
2. `npm test` 재실행
3. 실패 케이스 로그에서 테스트 섹션 확인

### 7.3 빌드는 되는데 동작이 이상함
원인:
- 배포 파일(`main.js`) 미반영

해결:
1. `npm run build`
2. Vault 플러그인 폴더의 `main.js` 교체
3. Obsidian 재시작

## 8. Git/GitHub 배포 문제

### 8.1 `Could not resolve host: github.com`
원인:
- 네트워크/DNS 문제

해결:
1. 네트워크 연결 확인
2. VPN/프록시 확인
3. 잠시 후 재시도

### 8.2 `Repository not found`
원인:
- 원격 URL 오타
- 저장소 미생성
- 계정 권한 없음

해결:
1. `git remote -v` 확인
2. `gh repo view <owner>/<repo>` 확인
3. 필요 시 저장소 생성: `gh repo create <owner>/<repo> --public`

### 8.3 `gh auth status`에서 token invalid
해결:
1. `gh auth login -h github.com`
2. 브라우저에서 device code 인증
3. 완료 후 `gh auth status` 재확인

### 8.4 문서 포털에서 복사 버튼이 예상과 다름
증상:
- 코드 블록 밖 인라인 텍스트에 복사 버튼이 안 보임

원인:
- 정책상 인라인 복사 버튼은 `https://`로 시작하는 값에만 표시됨

해결:
1. URL 값이 `https://`로 시작하는지 확인
2. 코드 블록 복사가 필요하면 값 자체를 코드 블록으로 배치
3. 문서 하단 Source Links 영역의 URL 복사 버튼 사용

## 9. 운영 노하우

### 9.1 충돌 최소화
- 팀 환경 기본값을 `새 버전 저장`으로 통일
- 출력 폴더를 날짜/팀 단위로 분리

### 9.2 AI 비용/보안 관리
- 기본 컨텍스트를 `선택 텍스트`로 고정
- 최대 길이 제한을 보수적으로 설정
- 민감 문서에는 AI 기능 사용 전 비식별화

### 9.3 시연/교육 중 안정성
- 네트워크 실패 대비 오프라인 시나리오 준비
- 샘플 파일을 항상 로컬에 복사해둠
- 설치/설정 스크린샷 사전 확보

## 10. 그래도 해결되지 않을 때
1. 재현 절차를 문장으로 정리
2. 사용 버전 기록
- Obsidian 버전
- 플러그인 버전
- OS 버전
3. 최근 변경/설정값 첨부
4. 저장소 이슈에 등록

## 11. 관련 문서
- 설치: `Install.md`
- 사용자 매뉴얼: `UserGuide.md`
- 시연 가이드: `Showcase.md`
- 개발자 매뉴얼: `Developer.md`
